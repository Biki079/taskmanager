{% extends 'tasks/base.html' %}


{% block navbar %}{% endblock %}

{% block extra_css %}
<style>
  body {
    background: linear-gradient(120deg, #2980b9, #6dd5fa, #ffffff);
    min-height: 100vh;
    font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
  }
  .login-card {
    box-shadow: 0 8px 32px rgba(44, 62, 80, 0.18);
    border-radius: 1.5rem;
    background: rgba(255,255,255,0.95);
    padding: 2.5rem 2.5rem 2rem 2.5rem;
    margin-top: 4rem;
    transition: box-shadow 0.3s, transform 0.3s;
    position: relative;
    overflow: hidden;
    animation: cardFadeIn 1s cubic-bezier(.4,0,.2,1);
  }
  .login-card:hover {
    box-shadow: 0 16px 48px rgba(44, 62, 80, 0.28);
    transform: translateY(-4px) scale(1.02);
  }
  @keyframes cardFadeIn {
    from { opacity: 0; transform: translateY(40px) scale(0.98); }
    to { opacity: 1; transform: none; }
  }
  .login-title {
    font-weight: 800;
    color: #2980b9;
    margin-bottom: 1.5rem;
    text-align: center;
    letter-spacing: 1px;
    text-shadow: 0 2px 8px #6dd5fa33;
  }
  .btn-primary {
    width: 100%;
    font-weight: 700;
    letter-spacing: 1px;
    background: linear-gradient(90deg, #2980b9, #6dd5fa);
    border: none;
    transition: background 0.3s, box-shadow 0.2s;
    box-shadow: 0 2px 8px #2980b933;
  }
  .btn-primary:focus {
    outline: none;
    box-shadow: 0 0 0 2px #6dd5fa88;
  }
  .btn-primary:hover {
    background: linear-gradient(90deg, #6dd5fa, #2980b9);
    box-shadow: 0 4px 16px #2980b944;
  }
  .form-label {
    font-weight: 600;
    color: #2980b9;
    letter-spacing: 0.5px;
  }
  .form-control:focus {
    border-color: #6dd5fa;
    box-shadow: 0 0 0 2px #6dd5fa55;
    background: #f8fbff;
  }
  .login-link {
    text-align: center;
    display: block;
    margin-top: 1.5rem;
    color: #2980b9;
    font-weight: 600;
    text-decoration: none;
    transition: color 0.2s;
  }
  .login-link:hover {
    color: #6dd5fa;
    text-decoration: underline;
  }
  .show-password-toggle {
    cursor: pointer;
    color: #2980b9;
    font-size: 1.2rem;
    opacity: 0.7;
    z-index: 2;
    transition: color 0.2s, opacity 0.2s;
    margin-left: 0.25rem;
  }
  .show-password-toggle:hover {
    color: #6dd5fa;
    opacity: 1;
  }
  .position-relative { position: relative; }
</style>
{% endblock %}

{% block content %}
<div class="container" style="max-width: 400px;">
  <div class="login-card">
    <h2 class="login-title">Login</h2>
    <form method="POST" novalidate>
      {% csrf_token %}
      {% if form.non_field_errors %}
      <div class="alert alert-danger">{{ form.non_field_errors }}</div>
      {% endif %}
      <div class="mb-3">
        <label for="id_username" class="form-label">Username</label>
        <div class="position-relative">
          {{ form.username }}
        </div>
        {% if form.username.errors %}
        <div class="text-danger small">{{ form.username.errors }}</div>
        {% endif %}
      </div>
      <div class="mb-3">
        <label for="id_password" class="form-label">Password</label>
        <div class="d-flex align-items-center gap-2">
          {{ form.password }}
          <span class="show-password-toggle" id="togglePassword" title="Show/Hide Password">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" viewBox="0 0 16 16">
              <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zm-8 4.5c-2.485 0-4.5-2.015-4.5-4.5S5.515 3.5 8 3.5s4.5 2.015 4.5 4.5-2.015 4.5-4.5 4.5zm0-1a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"/>
            </svg>
          </span>
        </div>
        {% if form.password.errors %}
        <div class="text-danger small">{{ form.password.errors }}</div>
        {% endif %}
      </div>
{% block extra_js %}
<script>
  // Show/hide password toggle
  document.addEventListener('DOMContentLoaded', function() {
    const toggle = document.getElementById('togglePassword');
    const pwdInput = document.getElementById('id_password');
    if (toggle && pwdInput) {
      toggle.addEventListener('click', function() {
        if (pwdInput.type === 'password') {
          pwdInput.type = 'text';
          toggle.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" viewBox="0 0 16 16"><path d="M13.359 11.238l2.122 2.122a.75.75 0 1 1-1.06 1.06l-2.122-2.122A7.48 7.48 0 0 1 8 13.5c-5 0-8-5.5-8-5.5a15.634 15.634 0 0 1 2.478-3.356l-1.6-1.6a.75.75 0 1 1 1.06-1.06l14 14a.75.75 0 0 1-1.06-1.06l-1.6-1.6a15.634 15.634 0 0 1-3.356 2.478zM8 12.5c2.485 0 4.5-2.015 4.5-4.5S10.485 3.5 8 3.5 3.5 5.515 3.5 8s2.015 4.5 4.5 4.5z"/></svg>`;
        } else {
          pwdInput.type = 'password';
          toggle.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"22\" fill=\"currentColor\" viewBox=\"0 0 16 16\"><path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zm-8 4.5c-2.485 0-4.5-2.015-4.5-4.5S5.515 3.5 8 3.5s4.5 2.015 4.5 4.5-2.015 4.5-4.5 4.5zm0-1a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z\"/></svg>`;
        }
      });
    }

    // Input focus effect
    const inputs = document.querySelectorAll('.form-control');
    inputs.forEach(input => {
      input.addEventListener('focus', function() {
        this.parentElement.classList.add('focus');
      });
      input.addEventListener('blur', function() {
        this.parentElement.classList.remove('focus');
      });
    });
  });
</script>
{% endblock %}
      <button type="submit" class="btn btn-primary">Login</button>
    </form>
    Don't have an account?<a class="login-link" href="{% url 'register' %}">Register here</a>
  </div>
</div>
{% endblock %}
